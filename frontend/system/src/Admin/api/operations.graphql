mutation approvePendingChange($id: String, $input: UpsertEntityInput!) {
  approvePendingChange(requestId: $id, input: $input) {
    ... on EntityType {
      __typename
      code
    }
  }
}

fragment PendingChangeSummary on PendingChangeNode {
  id: requestId
  name
  category
  changeType
  requestedBy
  requestedFor
  dateRequested
}

query pendingChanges($page: PaginationInput, $sort: [PendingChangeSortInput!]) {
  pendingChanges(page: $page, sort: $sort) {
    ... on PendingChangeConnector {
      totalCount
      nodes {
        ...PendingChangeSummary
      }
    }
  }
}

fragment PendingChangeDetails on PendingChangeNode {
  id: requestId
  name
  category
  changeType
  requestedBy
  requestedFor
  dateRequested
  body
}

query pendingChange($id: String!) {
  pendingChange(requestId: $id) {
    ... on PendingChangeNode {
      ...PendingChangeDetails
    }
  }
}

mutation requestChange($input: RequestChangeInput!) {
  requestChange(input: $input) {
    ... on PendingChangeNode {
      requestId
    }
  }
}
